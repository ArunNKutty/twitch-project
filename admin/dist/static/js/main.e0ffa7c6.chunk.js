(this["webpackJsonpadmin-graph-app"]=this["webpackJsonpadmin-graph-app"]||[]).push([[0],{259:function(e,t,a){e.exports=a.p+"static/media/neoflix-logo.1383c259.png"},262:function(e){e.exports=JSON.parse('{"a":"0.1.12"}')},277:function(e,t,a){e.exports=a(337)},282:function(e,t,a){},284:function(e,t,a){},337:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(104),c=a.n(r),i=(a(282),a(283),a(61)),o=a(27),m=(a(284),a(259)),u=a.n(m),s=a(352),E=a(350),p=a(60),d=a(359),v=a(349),g=a(356),y=a(354),b=a(360),f=a(351),h=a(49),k=a(199),O=a(264),R=a(147);function C(e){var t,a=e.movie,n=a.labels.map((function(e){return l.a.createElement(k.a,{key:e},e)})),r=a.properties;return l.a.createElement(y.a,{style:{width:"100%",maxWidth:"auto",marginBottom:"24px"}},l.a.createElement(O.a,{src:r.poster}),l.a.createElement(y.a.Content,null,l.a.createElement(y.a.Header,null,l.a.createElement(i.b,{to:"/movie/".concat(a.identity.toNumber())},r.title)),l.a.createElement(y.a.Meta,null,l.a.createElement("div",null,n),r.year&&"Released in ".concat(r.year.toNumber())),l.a.createElement(y.a.Description,null,null===(t=r.plot)||void 0===t?void 0:t.substr(0,100),"\u2026")),l.a.createElement(y.a.Content,{extra:!0},l.a.createElement(R.a,{name:"user"}),r.imdbRating))}var x=function(e){var t=Object(h.useReadCypher)("MATCH (m:Movie) WHERE m.title CONTAINS $query RETURN m LIMIT 12",e),a=t.loading,r=t.records,c=t.error,i=t.run;Object(n.useEffect)((function(){i(e)}),[e]);var o=null===r||void 0===r?void 0:r.map((function(e){var t=e.get("m");return l.a.createElement(d.a.Column,{key:t.identity.toNumber()},l.a.createElement(C,{movie:t}))}));return a?l.a.createElement(v.a,null):c?l.a.createElement(g.a,{negative:!0},c.message):(null===r||void 0===r?void 0:r.length)?l.a.createElement(d.a,{columns:3,doubling:!0},l.a.createElement(d.a.Row,{stretched:!0},o)):l.a.createElement(y.a,{style:{width:"100%",maxWidth:"auto"}},l.a.createElement(y.a.Content,null,"No results found"))};function A(){var e=Object(n.useState)(""),t=Object(p.a)(e,2),a=t[0],r=t[1];return l.a.createElement(E.a,null,l.a.createElement(b.a,null,l.a.createElement(f.a,null,l.a.createElement(f.a.Field,null,l.a.createElement("label",{htmlFor:"query"},"Search by title"),l.a.createElement("input",{type:"text",value:a,onChange:function(e){return r(e.target.value)}})))),l.a.createElement(x,{query:a}))}var S=a(116),N=a(357),j=a(355),T=a(361);function w(e){var t=e.movie,a=Object(n.useState)(),r=Object(p.a)(a,2),c=r[0],i=r[1],o=Object(n.useState)(),m=Object(p.a)(o,2),u=m[0],s=m[1],E=Object(n.useState)(t.properties.title),d=Object(p.a)(E,2),v=d[0],y=d[1],b=Object(n.useState)(t.properties.plot),k=Object(p.a)(b,2),O=k[0],R=k[1],C=Object(h.useLazyWriteCypher)("MATCH (m:Movie) WHERE id(m) = $id SET m += $updates, m.updatedAt = datetime() RETURN m.updatedAt as updatedAt"),x=Object(p.a)(C,1)[0];return l.a.createElement(f.a,null,u&&l.a.createElement(g.a,{positive:!0},u),c&&l.a.createElement(g.a,{negative:!0},c.message),l.a.createElement(f.a.Field,null,l.a.createElement("label",{htmlFor:"title"},"Title"),l.a.createElement("input",{id:"title",value:v,onChange:function(e){return y(e.target.value)}})),l.a.createElement(f.a.Field,null,l.a.createElement("label",{htmlFor:"plot"},"Plot"),l.a.createElement("textarea",{id:"plot",value:O,onChange:function(e){return R(e.target.value)}})),l.a.createElement(N.a,{primary:!0,onClick:function(e){e.preventDefault(),x({id:t.identity,updates:{title:v,plot:O}}).then((function(e){e&&s("Node updated at ".concat(e.records[0].get("updatedAt").toString()))})).catch((function(e){return i(e)}))}},"Submit"))}function I(e){var t=e.match,a=Object(h.useReadCypher)("MATCH (m:Movie) WHERE id(m) = $id RETURN m",{id:Object(S.int)(t.params.id)}),n=a.loading,r=a.first;if(n)return l.a.createElement(b.a,{style:{height:500}},l.a.createElement(j.a,{active:!0},l.a.createElement(v.a,null)));var c=null===r||void 0===r?void 0:r.get("m");return c?l.a.createElement(E.a,null,l.a.createElement(T.a,null,c.properties.title),l.a.createElement(w,{movie:c})):l.a.createElement(g.a,{negative:!0},"Movie with ID ",t.params.id," not found...")}var M=a(353);function H(e){var t=e.key,a=e.index,n=e.value,r=n.type;return"overview"===r?function(e){var t=e.key,a=e.value;return l.a.createElement(M.a.Cell,{key:t},l.a.createElement(i.b,{to:a.link},l.a.createElement(R.a,{circular:!0,inverted:!0,rounded:!0,color:"teal",name:a.icon,size:"large",style:{float:"left",marginRight:"6px"}}),l.a.createElement(T.a,{style:{marginTop:0,marginBottom:0}},a.name),l.a.createElement(T.a.Subheader,null,l.a.createElement(R.a,{name:a.caption.icon,size:"small"}),a.caption.text)))}({key:t+a,value:n}):"count"===r?function(e){var t,a=e.key,n=e.value;return l.a.createElement(M.a.Cell,{key:a,textAlign:"right"},l.a.createElement(R.a,{name:n.icon,size:"big"}),null===(t=n.number)||void 0===t?void 0:t.toNumber())}({key:t+a,value:n}):"labels"===r?function(e){var t=e.key,a=e.value.labels,n=a.length,r=a.slice(0,5).map((function(e){return l.a.createElement(i.b,{key:t+e.text,to:e.link},l.a.createElement(k.a,{className:e.class},e.text))})),c=n>5?" +".concat(n-5):"";return l.a.createElement(M.a.Cell,{key:t},r," ",c)}({key:t+a,value:n}):"action"===r?function(e){var t=e.key,a=e.value;return l.a.createElement(M.a.Cell,{key:t,textAlign:"right"},l.a.createElement(i.b,{to:a.link,className:a.class},a.icon&&l.a.createElement(R.a,{name:a.icon}),a.text))}({key:t+a,value:n}):l.a.createElement(M.a.Cell,{key:t+a},l.a.createElement("pre",null,JSON.stringify(n,null,2)))}function F(e){var t=e.records,a=t[0].keys.map((function(e){return l.a.createElement(M.a.HeaderCell,{key:e},e.startsWith("action")?"":e)})),n=t.map((function(e,t){var a=e.keys.map((function(a){return H({key:a,index:t,value:e.get(a)})}));return l.a.createElement(M.a.Row,{key:t},a)}));return l.a.createElement(M.a,null,l.a.createElement(M.a.Header,null,l.a.createElement(M.a.Row,null,a)),l.a.createElement(M.a.Body,null,n))}function W(e){var t=Object(n.useState)(""),a=Object(p.a)(t,2),r=a[0],c=a[1],i=Object(h.int)(e.limit||10),o=Object(h.useReadCypher)(e.cypher,{query:"",limit:i}),m=o.error,u=o.loading,s=o.records,d=o.run;Object(n.useEffect)((function(){d({query:r,limit:i})}),[r]);var y=l.a.createElement("div",null,"Loading...");return s&&!s.length?y=l.a.createElement("div",null,"No results found for ",l.a.createElement("strong",null,r)):s&&s.length?y=l.a.createElement(F,{records:s}):m?y=l.a.createElement(g.a,{negative:!0},m.message):u&&(y=l.a.createElement(v.a,null)),l.a.createElement(E.a,null,l.a.createElement(b.a,null,l.a.createElement(f.a,null,l.a.createElement(f.a.Field,null,l.a.createElement("label",{htmlFor:"query"},"Search"),l.a.createElement("input",{type:"text",value:r,onChange:function(e){return c(e.target.value)}})))),y)}function L(){return l.a.createElement(W,{cypher:"\n        MATCH (g:Genre)\n        WHERE g.name CONTAINS $query\n        RETURN\n            {\n            type: 'overview',\n            link: '/genres/'+ g.id,\n            name: g.name,\n            icon: 'fire',\n            caption: {\n                icon: 'film',\n                text:  size((g)<-[:IN_GENRE]-())  +' movies'\n            }\n            }  AS Genre,\n            {\n            type: 'labels',\n            labels: [ (p)-[:PROVIDES_ACCESS_TO]->(g) | {\n                text: p.name,\n                class: 'label--'+ apoc.text.slug(toLower(g.name)),\n                link: '/packages/'+ p.id\n            } ]\n            } AS Packages,\n            {\n                type: 'action',\n                class: 'ui primary basic button',\n                text: 'Edit',\n                icon: 'pencil',\n                link: '/genres/'+ g.id\n            } AS actionEdit\n        ORDER BY g.name\n        LIMIT 10\n    "})}var $=a(263);function D(){var e,t,a=Object(h.useReadCypher)("\n        CALL apoc.meta.schema({ labels: [ $label ] })\n    ",{label:"Movie"}),n=Object(h.useReadCypher)("MATCH (n:".concat("Movie",") WHERE n[ $property ] = $value RETURN n"),{property:"title",value:"Casino"});if(a.loading||n.loading)return l.a.createElement(v.a,null);var r={},c=null===(e=a.first)||void 0===e?void 0:e.get("value").Movie;return(null===n||void 0===n?void 0:n.first)&&(r=n.first.get("n").properties),c&&c.properties&&(t=Object.entries(c.properties).map((function(e){var t=Object(p.a)(e,2),a=t[0],n=t[1];return function(e){var t=e.name,a=e.type,n=e.value,r="text";switch(a){case"FLOAT":case"INTEGER":r="number";break;case"DATE":r="date";break;case"DATE_TIME":r="datetime"}return l.a.createElement(f.a.Field,{key:t},l.a.createElement("label",{htmlFor:t},t," - ",a),l.a.createElement("input",{type:r,id:t,value:n}))}(Object($.a)({name:a},n,{value:r&&r[a]}))}))),l.a.createElement(E.a,null,l.a.createElement(b.a,null,l.a.createElement(f.a,null,l.a.createElement(T.a,null,r.title),t),l.a.createElement("pre",null,JSON.stringify(r,null,2)),l.a.createElement("pre",null,JSON.stringify(c,null,2))))}var P=new URL(window.location.href),q=function(e){return P.protocol.includes("http")?"/".concat(e):"".concat(P.protocol,"//").concat(P.pathname.split("/dist/")[0],"/dist/").concat(e)};function G(){return l.a.createElement("div",null,l.a.createElement("pre",null,q("logo512.png")),l.a.createElement("img",{src:q("logo512.png"),alt:"logo"}),l.a.createElement(W,{cypher:"\n        MATCH (p:Package)\n        WHERE p.name CONTAINS $query\n        RETURN\n            {\n                type: 'overview',\n                link: '/packages/'+ p.id,\n                name: p.name,\n                icon: 'box',\n                caption: {\n                    icon: 'dollar sign',\n                    text:  p.price + ' for '+ p.duration.days +' days'\n                }\n            }  AS Package,\n            {\n                type: 'labels',\n                labels: [ (p)-[:PROVIDES_ACCESS_TO]->(g) | {\n                    text: g.name,\n                    class: 'label--'+ apoc.text.slug(toLower(g.name)),\n                    link: '/genres/'+ g.id\n                } ]\n                } AS Genres,\n            {\n                type: 'count',\n                //icon: 'users',\n                number: size((p)<-[:FOR_PACKAGE]-())\n            } AS Subscribers,\n            {\n                type: 'action',\n                class: 'ui primary basic button',\n                text: 'Edit',\n                icon: 'pencil',\n                link: '/packages/'+ p.id\n            } AS actionEdit\n        ORDER BY p.name\n        LIMIT $limit\n    ",limit:10}))}var B=a(262);var U=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(i.a,null,l.a.createElement(s.a,{inverted:!0,pointing:!0,fixed:"top",style:{padding:"1em 0"}},l.a.createElement(E.a,null,l.a.createElement(s.a.Item,{as:i.b,to:"/",style:{padding:"0 1em 0 0"}},l.a.createElement("img",{src:u.a,alt:"Neoflix",style:{width:"6em"}})),l.a.createElement(s.a.Item,{as:i.b,to:"/"},l.a.createElement("strong",null,"Admin Graph App")),l.a.createElement(s.a.Item,{as:i.b,to:"/genres"},"Genres"),l.a.createElement(s.a.Item,{as:i.b,to:"/packages"},"Packages"))),l.a.createElement("main",{className:"ui main container"},l.a.createElement(o.c,null,l.a.createElement(o.a,{exact:!0,path:"/",component:A}),l.a.createElement(o.a,{path:"/movie/:id",component:I}),l.a.createElement(o.a,{exact:!0,path:"/genres",component:L}),l.a.createElement(o.a,{path:"/genres/:id",component:D}),l.a.createElement(o.a,{exact:!0,path:"/packages",component:G})))),l.a.createElement("footer",null,l.a.createElement(E.a,null,l.a.createElement("pre",null,B.a))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _=Object(h.createDriver)("neo4j","localhost",7687,"neo4j","neo");c.a.render(l.a.createElement(h.Neo4jProvider,{driver:_},l.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[277,1,2]]]);
//# sourceMappingURL=main.e0ffa7c6.chunk.js.map